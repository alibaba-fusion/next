{"title":"上传前预处理","meta":{"title":"上传前预处理","description":"\n<p>使用beforeUpload去控制上传行为</p>\n<p>提醒: <code>https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload</code>接口:</p>\n<blockquote>\n<ol>\n<li>该接口仅作为测试使用,业务请勿使用</li>\n<li>该接口仅支持图片上传,其他文件类型接口请自备</li>\n</ol>\n</blockquote>\n","order":"8"},"codes":{"jsx":"import { Upload, Button } from '@alifd/next';\n\nReactDOM.render([\n    <Upload\n        listType=\"text\"\n        action=\"https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload\"\n        accept=\"image/png, image/jpg, image/jpeg, image/gif, image/bmp\"\n        beforeUpload={beforeUpload}\n        onChange={onChange}\n        key=\"1\"\n    >\n        <Button type=\"primary\" style={{margin: '0 0 10px'}}>Upload File</Button>\n    </Upload>,\n    <Upload\n        listType=\"text\"\n        action=\"https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload\"\n        accept=\"image/png, image/jpg, image/jpeg, image/gif, image/bmp\"\n        beforeUpload={asyncBeforeUpload}\n        onChange={onChange}\n        key=\"2\"\n    >\n        <Button type=\"secondary\" style={{margin: '0 0 10px'}}>Async Call before Upload File</Button>\n    </Upload>,\n    <Upload\n        listType=\"text\"\n        action=\"https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload\"\n        accept=\"image/png, image/jpg, image/jpeg, image/gif, image/bmp\"\n        beforeUpload={() => false}\n        onChange={onChange}\n        key=\"3\"\n    >\n        <Button type=\"normal\" style={{margin: '0 0 10px'}}>Prevent Upload</Button>\n    </Upload>,\n    <Upload\n        listType=\"text\"\n        action=\"https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload\"\n        accept=\"image/png, image/jpg, image/jpeg, image/gif, image/bmp\"\n        beforeUpload={() => new Promise(resl => setTimeout(() => resl(false)))}\n        onChange={onChange}\n        key=\"4\"\n    >\n        <Button type=\"primary\" style={{margin: '0 0 10px'}}>Async Prevent Upload</Button>\n    </Upload>,\n    <Upload\n        listType=\"text\"\n        action=\"https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload\"\n        accept=\"image/png, image/jpg, image/jpeg, image/gif, image/bmp\"\n        beforeUpload={() => {}}\n        onChange={onChange}\n        key=\"5\"\n    >\n        <Button type=\"secondary\" style={{margin: '0 0 10px'}}>Do nothing</Button>\n    </Upload>\n], mountNode);\n\nconst requestOpts = {\n    action: 'https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload',\n    data: {osstoken: 1234},\n    headers: {'X-Requested-With': 12345}\n};\n\nasync function ajax() {\n    return await new Promise(resolve => {\n        setTimeout(() => {\n            resolve(requestOpts);\n        }, 1e3);\n    });\n}\n\nfunction beforeUpload(file, options) {\n    console.log('beforeUpload callback : ', file, options);\n    return requestOpts;\n}\n\nasync function asyncBeforeUpload(file, options) {\n    console.log('beforeUpload callback : ', file, options);\n    return await ajax();\n}\n\nfunction onChange(file) {\n    console.log('onChange callback : ', file);\n}\n\n\n"},"body":"\n\n````jsx\nimport { Upload, Button } from '@alifd/next';\n\nReactDOM.render([\n    <Upload\n        listType=\"text\"\n        action=\"https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload\"\n        accept=\"image/png, image/jpg, image/jpeg, image/gif, image/bmp\"\n        beforeUpload={beforeUpload}\n        onChange={onChange}\n        key=\"1\"\n    >\n        <Button type=\"primary\" style={{margin: '0 0 10px'}}>Upload File</Button>\n    </Upload>,\n    <Upload\n        listType=\"text\"\n        action=\"https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload\"\n        accept=\"image/png, image/jpg, image/jpeg, image/gif, image/bmp\"\n        beforeUpload={asyncBeforeUpload}\n        onChange={onChange}\n        key=\"2\"\n    >\n        <Button type=\"secondary\" style={{margin: '0 0 10px'}}>Async Call before Upload File</Button>\n    </Upload>,\n    <Upload\n        listType=\"text\"\n        action=\"https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload\"\n        accept=\"image/png, image/jpg, image/jpeg, image/gif, image/bmp\"\n        beforeUpload={() => false}\n        onChange={onChange}\n        key=\"3\"\n    >\n        <Button type=\"normal\" style={{margin: '0 0 10px'}}>Prevent Upload</Button>\n    </Upload>,\n    <Upload\n        listType=\"text\"\n        action=\"https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload\"\n        accept=\"image/png, image/jpg, image/jpeg, image/gif, image/bmp\"\n        beforeUpload={() => new Promise(resl => setTimeout(() => resl(false)))}\n        onChange={onChange}\n        key=\"4\"\n    >\n        <Button type=\"primary\" style={{margin: '0 0 10px'}}>Async Prevent Upload</Button>\n    </Upload>,\n    <Upload\n        listType=\"text\"\n        action=\"https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload\"\n        accept=\"image/png, image/jpg, image/jpeg, image/gif, image/bmp\"\n        beforeUpload={() => {}}\n        onChange={onChange}\n        key=\"5\"\n    >\n        <Button type=\"secondary\" style={{margin: '0 0 10px'}}>Do nothing</Button>\n    </Upload>\n], mountNode);\n\nconst requestOpts = {\n    action: 'https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload',\n    data: {osstoken: 1234},\n    headers: {'X-Requested-With': 12345}\n};\n\nasync function ajax() {\n    return await new Promise(resolve => {\n        setTimeout(() => {\n            resolve(requestOpts);\n        }, 1e3);\n    });\n}\n\nfunction beforeUpload(file, options) {\n    console.log('beforeUpload callback : ', file, options);\n    return requestOpts;\n}\n\nasync function asyncBeforeUpload(file, options) {\n    console.log('beforeUpload callback : ', file, options);\n    return await ajax();\n}\n\nfunction onChange(file) {\n    console.log('onChange callback : ', file);\n}\n\n\n````","html":"<script>(function(){\"use strict\";\n\nvar ajax = function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n                switch (_context.prev = _context.next) {\n                    case 0:\n                        _context.next = 2;\n                        return new Promise(function (resolve) {\n                            setTimeout(function () {\n                                resolve(requestOpts);\n                            }, 1e3);\n                        });\n\n                    case 2:\n                        return _context.abrupt(\"return\", _context.sent);\n\n                    case 3:\n                    case \"end\":\n                        return _context.stop();\n                }\n            }\n        }, _callee, this);\n    }));\n\n    return function ajax() {\n        return _ref.apply(this, arguments);\n    };\n}();\n\nvar asyncBeforeUpload = function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(file, options) {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n                switch (_context2.prev = _context2.next) {\n                    case 0:\n                        console.log('beforeUpload callback : ', file, options);\n                        _context2.next = 3;\n                        return ajax();\n\n                    case 3:\n                        return _context2.abrupt(\"return\", _context2.sent);\n\n                    case 4:\n                    case \"end\":\n                        return _context2.stop();\n                }\n            }\n        }, _callee2, this);\n    }));\n\n    return function asyncBeforeUpload(_x, _x2) {\n        return _ref2.apply(this, arguments);\n    };\n}();\n\nvar _next = require(\"@alifd/next\");\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nReactDOM.render([React.createElement(\n    _next.Upload,\n    {\n        listType: \"text\",\n        action: \"https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload\",\n        accept: \"image/png, image/jpg, image/jpeg, image/gif, image/bmp\",\n        beforeUpload: beforeUpload,\n        onChange: onChange,\n        key: \"1\"\n    },\n    React.createElement(\n        _next.Button,\n        { type: \"primary\", style: { margin: '0 0 10px' } },\n        \"Upload File\"\n    )\n), React.createElement(\n    _next.Upload,\n    {\n        listType: \"text\",\n        action: \"https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload\",\n        accept: \"image/png, image/jpg, image/jpeg, image/gif, image/bmp\",\n        beforeUpload: asyncBeforeUpload,\n        onChange: onChange,\n        key: \"2\"\n    },\n    React.createElement(\n        _next.Button,\n        { type: \"secondary\", style: { margin: '0 0 10px' } },\n        \"Async Call before Upload File\"\n    )\n), React.createElement(\n    _next.Upload,\n    {\n        listType: \"text\",\n        action: \"https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload\",\n        accept: \"image/png, image/jpg, image/jpeg, image/gif, image/bmp\",\n        beforeUpload: function beforeUpload() {\n            return false;\n        },\n        onChange: onChange,\n        key: \"3\"\n    },\n    React.createElement(\n        _next.Button,\n        { type: \"normal\", style: { margin: '0 0 10px' } },\n        \"Prevent Upload\"\n    )\n), React.createElement(\n    _next.Upload,\n    {\n        listType: \"text\",\n        action: \"https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload\",\n        accept: \"image/png, image/jpg, image/jpeg, image/gif, image/bmp\",\n        beforeUpload: function beforeUpload() {\n            return new Promise(function (resl) {\n                return setTimeout(function () {\n                    return resl(false);\n                });\n            });\n        },\n        onChange: onChange,\n        key: \"4\"\n    },\n    React.createElement(\n        _next.Button,\n        { type: \"primary\", style: { margin: '0 0 10px' } },\n        \"Async Prevent Upload\"\n    )\n), React.createElement(\n    _next.Upload,\n    {\n        listType: \"text\",\n        action: \"https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload\",\n        accept: \"image/png, image/jpg, image/jpeg, image/gif, image/bmp\",\n        beforeUpload: function beforeUpload() {},\n        onChange: onChange,\n        key: \"5\"\n    },\n    React.createElement(\n        _next.Button,\n        { type: \"secondary\", style: { margin: '0 0 10px' } },\n        \"Do nothing\"\n    )\n)], mountNode);\n\nvar requestOpts = {\n    action: 'https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload',\n    data: { osstoken: 1234 },\n    headers: { 'X-Requested-With': 12345 }\n};\n\nfunction beforeUpload(file, options) {\n    console.log('beforeUpload callback : ', file, options);\n    return requestOpts;\n}\n\nfunction onChange(file) {\n    console.log('onChange callback : ', file);\n}})()</script><div class=\"highlight\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Upload<span class=\"token punctuation\">,</span> Button <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@alifd/next'</span><span class=\"token punctuation\">;</span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Upload</span></span>\n        <span class=\"token attr-name\">listType</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">accept</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>image/png, image/jpg, image/jpeg, image/gif, image/bmp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">beforeUpload</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>beforeUpload<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onChange<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>primary<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>margin<span class=\"token operator\">:</span> <span class=\"token string\">'0 0 10px'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Upload File</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Button</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Upload</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Upload</span></span>\n        <span class=\"token attr-name\">listType</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">accept</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>image/png, image/jpg, image/jpeg, image/gif, image/bmp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">beforeUpload</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>asyncBeforeUpload<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onChange<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>secondary<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>margin<span class=\"token operator\">:</span> <span class=\"token string\">'0 0 10px'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Async Call before Upload File</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Button</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Upload</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Upload</span></span>\n        <span class=\"token attr-name\">listType</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">accept</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>image/png, image/jpg, image/jpeg, image/gif, image/bmp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">beforeUpload</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onChange<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>3<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>normal<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>margin<span class=\"token operator\">:</span> <span class=\"token string\">'0 0 10px'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Prevent Upload</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Button</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Upload</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Upload</span></span>\n        <span class=\"token attr-name\">listType</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">accept</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>image/png, image/jpg, image/jpeg, image/gif, image/bmp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">beforeUpload</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resl</span> <span class=\"token operator\">=></span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resl</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onChange<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>4<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>primary<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>margin<span class=\"token operator\">:</span> <span class=\"token string\">'0 0 10px'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Async Prevent Upload</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Button</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Upload</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Upload</span></span>\n        <span class=\"token attr-name\">listType</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">accept</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>image/png, image/jpg, image/jpeg, image/gif, image/bmp<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">beforeUpload</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onChange<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>5<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>secondary<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>margin<span class=\"token operator\">:</span> <span class=\"token string\">'0 0 10px'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Do nothing</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Button</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Upload</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> mountNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> requestOpts <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    action<span class=\"token operator\">:</span> <span class=\"token string\">'https://www.easy-mock.com/mock/5b713974309d0d7d107a74a3/alifd/upload'</span><span class=\"token punctuation\">,</span>\n    data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>osstoken<span class=\"token operator\">:</span> <span class=\"token number\">1234</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'X-Requested-With'</span><span class=\"token operator\">:</span> <span class=\"token number\">12345</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>requestOpts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1e3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">beforeUpload</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file<span class=\"token punctuation\">,</span> options</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'beforeUpload callback : '</span><span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> requestOpts<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">asyncBeforeUpload</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file<span class=\"token punctuation\">,</span> options</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'beforeUpload callback : '</span><span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">await</span> <span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'onChange callback : '</span><span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre></div>"}