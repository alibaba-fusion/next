# Overlay

-   category: Utility
-   family: Util
-   chinese: 弹层

---

A collection of tool for generating overlay.

## Guide

Overlay provides a series of components for creating overlay:

### Overlay

Overlay can pop up a layer in the page, provides positioning, animation and other common functions. Overlay is designed as a stateless component that does not control the state of its own visible.

**Note:** Configurations like canCloseby\* also need to work with onRequestClose to close the overlay.

#### Safe node

Overlay provides the function of hiding itself by clicking document. If you want to click a node and do not hide the overlay (for example, the node that triggers the overlay to open), pass the node to the safeNode property.

#### Alignment

1. The value of the align property can be a space-separated string, such as `tl bl`, `tl` means the top left of the target element and `bl` means the bottom left of the reference element, so `tl bl` means the top left of the target element aligns with the bottom left of the reference element. Among the available options are `tl`, `tc`, `tr`, `cl`, `cc`, `cr`, `bl`, `bc`, `br`. `t` is short for `top`, `b` is short for `bottom`, `c` is short for `center`, `l` is short for `left`, and `r` is short for `right`.

2. The align support Boolean value is only false. When set to false, JS positioning is not used, so you can pass the style or className for CSS positioning according to your needs.

3. Under RTL Mode, Overylay will transfer r(right) and l(left) to each other automatically. It means `tl bl` under RTL Mode works the same to `tr br` under Non-RTL Mode
   The following example shows how to position the overlay to the top right corner of the page:

```html
<Overlay visible align="tr tr"><span>123</span></Overlay>
```

### Popup

Popup is the wrapper of Overlay. It receives a node as a trigger node and pops up a overlay. This overlay uses the node as the reference element for positioning by default.

## API

### Overlay

| Param                  | Description                                                                                                                                                                                                                                                           | Type                                                           | Default Value                                | Required | Supported Version |
| ---------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------- | -------------------------------------------- | -------- | ----------------- |
| children               | Content of overlay                                                                                                                                                                                                                                                    | React.ReactElement & { ref?: React.RefCallback\<HTMLElement> } | -                                            |          | -                 |
| visible                | Whether to show the overlay                                                                                                                                                                                                                                           | boolean                                                        | false                                        |          | -                 |
| onRequestClose         | Callback function that triggers an event when the overlay request closed                                                                                                                                                                                              | (type: string, e: Event \| React.MouseEvent\<Element>) => void | -                                            |          | -                 |
| target                 | Reference element for overlay positioning                                                                                                                                                                                                                             | PropTarget                                                     | Position.VIEWPORT                            |          | -                 |
| align                  | Alignment of the overlay relative to the reference element, see [Alignment](#Alignment)                                                                                                                                                                               | string \| boolean                                              | 'tl bl'                                      |          | -                 |
| offset                 | Fine                                                                                                                                                                                                                                                                  | Array\<number>                                                 | [0, 0]                                       |          | -                 |
| container              | Container of the overlay, if it is a function, it should return ref, if it is a string, it is should be the id of the DOM element, it can also be passed the DOM element directly.                                                                                    | PropTarget                                                     | -                                            |          | -                 |
| hasMask                | Whether to show the mask                                                                                                                                                                                                                                              | boolean                                                        | false                                        |          | -                 |
| canCloseByEsc          | Whether to support pressing esc to close the overlay                                                                                                                                                                                                                  | boolean                                                        | true                                         |          | -                 |
| canCloseByOutSideClick | Whether to support clicking the outside to close the overlay when the mask is hidden                                                                                                                                                                                  | boolean                                                        | true                                         |          | -                 |
| canCloseByMask         | Whether to support clicking the mask to close the overlay when the mask is visible                                                                                                                                                                                    | boolean                                                        | true                                         |          | -                 |
| beforeOpen             | Callback function that triggers the event before the overlay opens                                                                                                                                                                                                    | (target?: React.ReactNode) => void                             | -                                            |          | -                 |
| onOpen                 | Callback function that triggers the event when the overlay opens                                                                                                                                                                                                      | (target?: React.ReactNode) => void                             | -                                            |          | -                 |
| afterOpen              | Callback function that triggers the event after the overlay opens, if enable animations, trigger after the animation ends                                                                                                                                             | (target?: React.ReactNode) => void                             | -                                            |          | -                 |
| beforeClose            | Callback function that triggers the event before the overlay closes                                                                                                                                                                                                   | (target?: React.ReactNode) => void                             | -                                            |          | -                 |
| onClose                | Callback function that triggers the event when the overlay closes                                                                                                                                                                                                     | (target?: React.ReactNode) => void                             | -                                            |          | -                 |
| afterClose             | Callback function that triggers the event after the overlay closes, if enable animations, trigger after the animation ends                                                                                                                                            | (target?: React.ReactNode) => void                             | -                                            |          | -                 |
| beforePosition         | Callback function that triggers the event before the overlay positions                                                                                                                                                                                                | () => void                                                     | -                                            |          | -                 |
| onPosition             | Callback function that triggers the event when the overlay positions                                                                                                                                                                                                  | (config: object, node?: object) => void                        | -                                            |          | -                 |
| shouldUpdatePosition   | Whether to force the update of positioning after each rerendered, which is generally used to maintain the original positioning when the size of the content area changes.                                                                                             | boolean                                                        | false                                        |          | -                 |
| autoFocus              | Whether to focus the element in the overlay automatically when the overlay is opened                                                                                                                                                                                  | boolean                                                        | false                                        |          | -                 |
| needAdjust             | When the overlay is not visible due to scrolling of the page, does it automatically adjust the position to appear in the visible area?                                                                                                                                | boolean                                                        | true                                         |          | -                 |
| disableScroll          | Whether to disable page scrolling                                                                                                                                                                                                                                     | boolean                                                        | false                                        |          | -                 |
| cache                  | Whether to keep dom nodes when hidden                                                                                                                                                                                                                                 | boolean                                                        | false                                        |          | -                 |
| safeNode               | When clicking on the document, does not close the overlay if the node is included. If it is a function, it should return ref, if it is a string, it should be the id of the DOM element, it can also be directly passed to the DOM element, or the above values Array | React.ReactNode                                                | -                                            |          | -                 |
| wrapperClassName       | Class name of the overlay's wrapper node                                                                                                                                                                                                                              | string                                                         | -                                            |          | -                 |
| wrapperStyle           | Inline stylesheet of the overlay's wrapper node                                                                                                                                                                                                                       | React.CSSProperties                                            | -                                            |          | -                 |
| animation              | Configure animation, support the \{in: 'enter-class', out: 'leave                                                                                                                                                                                                     | string \| boolean \| AnimationObjectType \| undefined          | \{ in: 'expandInDown', out: 'expandOutUp' \} |          | -                 |
| v2                     | Enable v2                                                                                                                                                                                                                                                             | false \| undefined                                             | false                                        |          | 1.25              |
| points                 | [v2] align in the array form, cannot be used with align                                                                                                                                                                                                               | Array\<string>                                                 | -                                            |          | 1.25              |
| useCapture             | Add listener in capture phase, compatible with react 17                                                                                                                                                                                                               | boolean                                                        | -                                            |          | 1.25              |

### Overlay V2

| Param                  | Description                                                                                                                                                                                                                                                           | Type                                                           | Default Value                                | Required | Supported Version |
| ---------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------- | -------------------------------------------- | -------- | ----------------- |
| children               | Content of overlay                                                                                                                                                                                                                                                    | React.ReactElement & { ref?: React.RefCallback\<HTMLElement> } | -                                            |          | -                 |
| visible                | Whether to show the overlay                                                                                                                                                                                                                                           | boolean                                                        | false                                        |          | -                 |
| onRequestClose         | Callback function that triggers an event when the overlay request closed                                                                                                                                                                                              | (type: string, e: Event \| React.MouseEvent\<Element>) => void | -                                            |          | -                 |
| target                 | Reference element for overlay positioning                                                                                                                                                                                                                             | PropTarget                                                     | Position.VIEWPORT                            |          | -                 |
| align                  | Alignment of the overlay relative to the reference element, see [Alignment](#Alignment)                                                                                                                                                                               | string                                                         | 'tl bl'                                      |          | -                 |
| offset                 | Fine                                                                                                                                                                                                                                                                  | Array\<number>                                                 | [0, 0]                                       |          | -                 |
| container              | Container of the overlay, if it is a function, it should return ref, if it is a string, it is should be the id of the DOM element, it can also be passed the DOM element directly.                                                                                    | PropTarget                                                     | -                                            |          | -                 |
| hasMask                | Whether to show the mask                                                                                                                                                                                                                                              | boolean                                                        | false                                        |          | -                 |
| canCloseByEsc          | Whether to support pressing esc to close the overlay                                                                                                                                                                                                                  | boolean                                                        | true                                         |          | -                 |
| canCloseByOutSideClick | Whether to support clicking the outside to close the overlay when the mask is hidden                                                                                                                                                                                  | boolean                                                        | true                                         |          | -                 |
| canCloseByMask         | Whether to support clicking the mask to close the overlay when the mask is visible                                                                                                                                                                                    | boolean                                                        | true                                         |          | -                 |
| beforeOpen             | Callback function that triggers the event before the overlay opens                                                                                                                                                                                                    | (target?: React.ReactNode) => void                             | -                                            |          | -                 |
| onOpen                 | Callback function that triggers the event when the overlay opens                                                                                                                                                                                                      | (target?: React.ReactNode) => void                             | -                                            |          | -                 |
| afterOpen              | Callback function that triggers the event after the overlay opens, if enable animations, trigger after the animation ends                                                                                                                                             | (target?: React.ReactNode) => void                             | -                                            |          | -                 |
| beforeClose            | Callback function that triggers the event before the overlay closes                                                                                                                                                                                                   | (target?: React.ReactNode) => void                             | -                                            |          | -                 |
| onClose                | Callback function that triggers the event when the overlay closes                                                                                                                                                                                                     | (target?: React.ReactNode) => void                             | -                                            |          | -                 |
| afterClose             | Callback function that triggers the event after the overlay closes, if enable animations, trigger after the animation ends                                                                                                                                            | (target?: React.ReactNode) => void                             | -                                            |          | -                 |
| beforePosition         | Callback function that triggers the event before the overlay positions                                                                                                                                                                                                | () => void                                                     | -                                            |          | -                 |
| onPosition             | Callback function that triggers the event when the overlay positions                                                                                                                                                                                                  | (config: object, node?: object) => void                        | -                                            |          | -                 |
| shouldUpdatePosition   | Whether to force the update of positioning after each rerendered, which is generally used to maintain the original positioning when the size of the content area changes.                                                                                             | boolean                                                        | false                                        |          | -                 |
| autoFocus              | Whether to focus the element in the overlay automatically when the overlay is opened                                                                                                                                                                                  | boolean                                                        | false                                        |          | -                 |
| disableScroll          | Whether to disable page scrolling                                                                                                                                                                                                                                     | boolean                                                        | false                                        |          | -                 |
| cache                  | Whether to keep dom nodes when hidden                                                                                                                                                                                                                                 | boolean                                                        | false                                        |          | -                 |
| safeNode               | When clicking on the document, does not close the overlay if the node is included. If it is a function, it should return ref, if it is a string, it should be the id of the DOM element, it can also be directly passed to the DOM element, or the above values Array | React.ReactNode                                                | -                                            |          | -                 |
| wrapperClassName       | Class name of the overlay's wrapper node                                                                                                                                                                                                                              | string                                                         | -                                            |          | -                 |
| wrapperStyle           | Inline stylesheet of the overlay's wrapper node                                                                                                                                                                                                                       | React.CSSProperties                                            | -                                            |          | -                 |
| animation              | Configure animation, support the \{in: 'enter-class', out: 'leave                                                                                                                                                                                                     | string \| false \| AnimationObjectType \| undefined            | \{ in: 'expandInDown', out: 'expandOutUp' \} |          | -                 |
| v2                     | Enable v2                                                                                                                                                                                                                                                             | true                                                           | false                                        |          | 1.25              |
| points                 | [v2] align in the array form, cannot be used with align                                                                                                                                                                                                               | Array\<string>                                                 | -                                            |          | 1.25              |
| useCapture             | Add listener in capture phase, compatible with react 17                                                                                                                                                                                                               | boolean                                                        | -                                            |          | 1.25              |

### Overlay.Popup

| Param               | Description                                                                                                                                                   | Type                                                                   | Default Value                  | Required |
| ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------- | ------------------------------ | -------- |
| autoAdjust          | Whether to adjust the position automatically when the overlay is covered                                                                                      | boolean                                                                | -                              |          |
| children            | Content of overlay                                                                                                                                            | React.ReactElement                                                     | -                              |          |
| autoFit             | Whether the overlay is automatically adapted to the content                                                                                                   | boolean                                                                | false                          |          |
| visible             | Whether the overlay is visible currently                                                                                                                      | boolean                                                                | false                          |          |
| target              | Reference element for overlay positioning                                                                                                                     | PropTarget                                                             | -                              |          |
| trigger             | Trigger the overlay to show or hide elements                                                                                                                  | React.ReactElement                                                     | -                              |          |
| triggerType         | Trigger the overlay to show or hide operations, either 'click', 'hover', 'focus', or an array of them, such as ['hover', 'focus']                             | 'click' \| 'hover' \| 'focus' \| Array\<'click' \| 'hover' \| 'focus'> | 'hover'                        |          |
| triggerClickKeycode | Customize the keyboard trigger keys that will trigger click event handlers when trigger is focused. It will only take effect when the triggerType is 'click'. | number \| Array\<number>                                               | [KEYCODE.SPACE, KEYCODE.ENTER] |          |
| defaultVisible      | Whether to show the overlay by default                                                                                                                        | boolean                                                                | false                          |          |
| onVisibleChange     | Callback function that triggers when the overlay shows or hides                                                                                               | (visible: boolean, type: string \| object, e?: object) => void         | -                              |          |
| disabled            | Set this property, the overlay cannot be displayed or hidden                                                                                                  | boolean                                                                | false                          |          |
| delay               | Delay time (in milliseconds) when the overlay is displayed or hidden, effective when triggerType is set to hover                                              | number                                                                 | 200                            |          |
| mouseEnterDelay     | Delay display after mouse enter, Higher priority than delay                                                                                                   | number                                                                 | -                              |          |
| mouseLeaveDelay     | Delay display after mouse leave, Higher priority than delay                                                                                                   | number                                                                 | -                              |          |
| canCloseByTrigger   | Whether overlay can be closed by trigger                                                                                                                      | boolean                                                                | true                           |          |
| followTrigger       | Follow trigger to scroll or not                                                                                                                               | boolean                                                                | false                          |          |
| v2                  | Enable v2 version                                                                                                                                             | false \| undefined                                                     | -                              |          |
| placement           | [v2] quick position                                                                                                                                           | string                                                                 | 'tr'                           |          |

### Overlay.Popup

| Param               | Description                                                                                                                                                   | Type                                                                   | Default Value                  | Required |
| ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------- | ------------------------------ | -------- |
| autoAdjust          | Whether to adjust the position automatically when the overlay is covered                                                                                      | boolean                                                                | -                              |          |
| children            | Content of overlay                                                                                                                                            | React.ReactElement                                                     | -                              |          |
| autoFit             | Whether the overlay is automatically adapted to the content                                                                                                   | boolean                                                                | false                          |          |
| visible             | Whether the overlay is visible currently                                                                                                                      | boolean                                                                | false                          |          |
| target              | Reference element for overlay positioning                                                                                                                     | PropTarget                                                             | -                              |          |
| trigger             | Trigger the overlay to show or hide elements                                                                                                                  | React.ReactElement                                                     | -                              |          |
| triggerType         | Trigger the overlay to show or hide operations, either 'click', 'hover', 'focus', or an array of them, such as ['hover', 'focus']                             | 'click' \| 'hover' \| 'focus' \| Array\<'click' \| 'hover' \| 'focus'> | 'hover'                        |          |
| triggerClickKeycode | Customize the keyboard trigger keys that will trigger click event handlers when trigger is focused. It will only take effect when the triggerType is 'click'. | number \| Array\<number>                                               | [KEYCODE.SPACE, KEYCODE.ENTER] |          |
| defaultVisible      | Whether the overlay is visible default                                                                                                                        | boolean                                                                | false                          |          |
| onVisibleChange     | Callback function that triggers the event when the overlay shows or hides                                                                                     | (visible: boolean, type: string \| object, e?: object) => void         | -                              |          |
| disabled            | If set this property, the overlay cannot be shown or hidden                                                                                                   | boolean                                                                | false                          |          |
| delay               | Delay time (in milliseconds) when the overlay is displayed or hidden, effective when triggerType is set to hover                                              | number                                                                 | 200                            |          |
| mouseEnterDelay     | Delay display after mouse enter, Higher priority than delay                                                                                                   | number                                                                 | -                              |          |
| mouseLeaveDelay     | Delay display after mouse leave, Higher priority than delay                                                                                                   | number                                                                 | -                              |          |
| canCloseByTrigger   | Whether the trigger element can close the overlay                                                                                                             | boolean                                                                | true                           |          |
| followTrigger       | Follow trigger to scroll or not                                                                                                                               | boolean                                                                | false                          |          |
| v2                  | Enable v2 version                                                                                                                                             | true                                                                   | -                              |          |
| placement           | [v2] quick position                                                                                                                                           | string                                                                 | 'tr'                           |          |

### Overlay.Position

| Param    | Description                               | Type                     | Default Value | Required |
| -------- | ----------------------------------------- | ------------------------ | ------------- | -------- |
| children | Content of overlay                        | React.ReactElement       | -             |          |
| target   | Reference element for overlay positioning | PropTarget \| 'viewport' | -             |          |

### Overlay.Gateway

| Param    | Description                               | Type                                                                               | Default Value | Required |
| -------- | ----------------------------------------- | ---------------------------------------------------------------------------------- | ------------- | -------- |
| children | Content of overlay                        | null \| (React.ReactElement & { ref?: React.RefCallback\<HTMLElement> \| string }) | -             |          |
| target   | Reference element for overlay positioning | PropTarget                                                                         | -             |          |

### AnimationObjectType

```typescript
export type AnimationObjectType = Record<'in' | 'out', string>;
```

### PropTarget

```typescript
export type Target<T = unknown> =
    | React.ReactInstance
    | string
    | ((param?: T) => React.ReactInstance | Element | Text | Node | null | void | undefined)
    | Element
    | Node
    | Text
    | null
    | false
    | undefined;
```

## ARIA and KeyBoard

`Description`: This component needs to be used in conjunction with other components to be prompted. Refer to the above `overlay`
